## 问题复盘
- 登录后事件合并逻辑仅把“云端缺失的本地事件”尝试上报并合并 `created`，未把 `localEvents` 自身纳入界面（若云端上报失败则重登后看不到本地事件）——见 `App.tsx:301-321`。
- 从本地读取的事件 `date` 字段是字符串，后续使用 `isSameDay` 等日期比较可能不可靠，需要标准化为 `Date` 对象。

## 修复方案
1. 标准化本地事件
- 读取 `localEvents` 时，将 `date` 字段转为 `new Date(...)`，保证后续比较和渲染正常。

2. 登录后合并策略改为“云端 + 本地（无论云端是否成功补齐）”
- 计算 `missing` 并尝试上报生成 `created`；
- `mergedEvents = [...fetchedEvents, ...created, ...missing]`（对 `missing` 做去重防重复）；
- 即使云端失败，界面也展示本地事件，确保重登后仍可见。

3. 可见标签补全
- 由 `mergedEvents` 的 `category` 集合并入 `visibleTags`，避免某些事件所属标签未在当前可见集导致被过滤掉。

4. 辅助函数
- 新增 `hydrateEvent(e)` 或内联转换逻辑，将 JSON 反序列化后的 `date` 规范化为 `Date`。

5. 结果验证
- 登录→创建时间段→登出→重登：事件仍显示；
- 在云端可用时，自动将 `missing` 上报并在随后刷新/重登后从云端读取到相同记录。

## 代码改动范围
- `App.tsx:301-321` 登录后数据加载与合并逻辑：
  - 读取 `localEvents` 后规范化 `date`；
  - `mergedEvents = fetchedEvents + created + missing`；
  - `visibleTags` 并入 `mergedEvents` 的类别集合。

## 风险控制
- 去重规则沿用现有 `isDup` 比较，避免重复渲染；
- 仅触碰合并与标准化逻辑，不改动事件 CRUD 接口。