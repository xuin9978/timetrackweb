## 可能原因（基于当前代码）
- 可见标签过滤：渲染使用 `filteredEvents = events.filter(event => visibleTags.includes(event.category))`（App.tsx:239-241）。若 `visibleTags` 为空或未包含新事件的 `category`，创建后不会显示。
- 未登录：`handleAddEvent`（App.tsx:107）在未登录时直接返回并提示，不再做本地渲染。
- 云端写入失败：`createEvents`（utils/eventService.ts:38-51）失败时当前逻辑会做本地暂存，但近期你要求改为“数据库为准”，可能导致失败时没有任何渲染。

## 修复方案
1. 创建后更新可见标签
- 在 `handleAddEvent` 成功保存后，追加一步：将新创建的事件的 `category` 合并进 `visibleTags`（去重），确保不过滤掉新事件。

2. 错误提示与回退展示策略（保持数据库为准）
- 若 `createEvents` 返回空或出错，仅提示错误不渲染；但为了“可见性一致”，在错误提示旁显示当前 `visibleTags` 状态，建议用户打开对应标签。

3. 统一刷新并保证 `visibleTags` 覆盖所有事件类别
- 在事件的新增/更新/删除后，拉取最新 `events`，并将 `visibleTags` 合并 `events.map(e => e.category)` 去重，避免显示被过滤。

4. 运行时诊断
- 在创建后临时打印：`console.log('visibleTags', visibleTags, 'newCategories', newCats)` 便于你确认过滤状态。

## 验证步骤
- 登录后创建一个时间段，立即显示；
- 切换/隐藏标签后再创建，`visibleTags` 自动补全该标签，事件仍显示；
- 刷新或重登后事件仍显示（从数据库拉取）。

## 不改动后端
- 保持 Supabase 表与 RLS 现状；仅改前端的 `handleAddEvent` 成功分支添加可见标签合并，并在事件操作后刷新 `events` 与 `visibleTags`。